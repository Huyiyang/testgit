<?xml version="1.0" encoding="utf-8"?>
<!--
  有关如何配置 ASP.NET 应用程序的详细信息，请访问
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <configSections>
    <sectionGroup name="cc.com">
      <section name="memcached" type="Enyim.Caching.Configuration.MemcachedClientSection, Enyim.Caching" />
      <section name="cc.dal" type="CC.Framework.DAL.DALSection, CC.Framework.DAL" />
      <section name="cc.framework" type="CC.Framework.FrameworkSection, CC.Framework" />
    </sectionGroup>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
  </configSections>
  <log4net>
    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="log\log.txt" />
      <appendToFile value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%d [%t] %-5p %c - %m%n" />
      </layout>
      <filter type="log4net.Filter.LoggerMatchFilter">
        <loggerToMatch value="DBLOG" />
        <acceptOnMatch value="false" />
      </filter>
      <filter type="log4net.Filter.LoggerMatchFilter">
        <loggerToMatch value="REQLOG" />
        <acceptOnMatch value="false" />
      </filter>
    </appender>
    <root>
      <appender-ref ref="LogFileAppender" />
    </root>
  </log4net>
  <cc.com>
    <!--memcached 配置-->
    <memcached protocol="Binary">
      <servers>
        <add address="127.0.0.1" port="11211" />
      </servers>
      <socketPool minPoolSize="10" maxPoolSize="100" connectionTimeout="00:00:10" deadTimeout="00:02:00" />
    </memcached>
    <!--dal 配置-->
    <cc.dal>
      <!--DBLogMonitorSeconds:数据库日志监控频率（写入频率）,单位：秒 connectionString:数据库日志连接字符串-->
      <dbLog dbLogMonitorSeconds="1" connectionString="server=192.168.4.8;database=cc_log;uid=root;pwd=1" />
      <core connMonitorSeconds="10" connectionString="server=192.168.4.8;database=cc_global;uid=root;pwd=1">

        <!--采用分片的数据库，DBName:数据库名称 ColumnName:分片字段 RouteDB:存储分区的数据库-->
        <shardDB dbName="erp" columnName="profileid" routeTable="erp_shard" registerShard="4" />
      </core>
    </cc.dal>
    <!--framework 配置-->
    <cc.framework errorintercept="true">
      <authentication loginUrl="~/account/logon" domain="" sessionTimeout="120" />
    </cc.framework>
  </cc.com>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="enabledRegister" value="true" />
    <add key="SQLRAssemblyName" value="CC.InnerBLL,CC.ERP.BLL" />
    <add key="smsaccount" value="cdlkxx" />
    <add key="smspwd" value="NSCY6B" />
    <add key="imguploaddomain" value="img1.laikensoft.com" />
    <add key="imgdomains" value="img1.laikensoft.com;img2.laikensoft.com;img3.laikensoft.com" />
    <!--register1:完整注册; register2:快速注册-->
    <add key="defaultregister" value="register1" />
    <add key="defaultlogin" value="logon" />
    <!--注册是否开启大客户引导-->
    <add key="is_ka_register" value="true" />

    <add key="sms_ihuyi_uname" value="cf_xtcs" />
    <add key="sms_ihuyi_passwd" value="asdf1234" />
    <add key="sns_ihuyi_url" value="http://106.ihuyi.cn/webservice/sms.php" />

    <add key="sms_woxp_code" value="11915" />
    <add key="sms_woxp_uname" value="woxp_lk361" />
    <add key="sms_woxp_passwd" value="e10adc3949ba59abbe56e057f20f883e" />
    <add key="sms_woxp_url" value="http://gateway.woxp.cn:6630/gb2312/web_api/" />

    <add key="sms_emay_url" value="http://sdk4report.eucp.b2m.cn:8080/sdkproxy/sendsms.action" />
    <add key="sms_emay_balance_url" value="http://sdk4report.eucp.b2m.cn:8080/sdkproxy/querybalance.action" />
    <add key="sms_emay_uname" value="6SDK-EMY-6688-KJYPT" />
    <add key="sms_emay_passwd" value="394546" />

    <add key="sms_channel" value="emay" />

    <add key="cdnFileRoot" value="" />
    <add key="webhost" value="http://www.laikensoft.com" />

    <add key="rootdomain" value="laikensoft.com" />
    <add key="passportdomain" value="www.laikensoft.com" />
    <add key="surpportpassportSSL" value="false" />
    <add key="erpdomain" value="erp.laikensoft.com" />
    <add key="lkurl" value="{'Url':'http://erp.laikensoft.com/sysadmin.aspx?method=flushprofile', 'IPList':[{IP:'127.0.0.1',Port:'80'}] }" />
    <add key="mall2bdomain" value="b2b.laikensoft.com" />
    <add key="allinonedomain" value="ent.laikensoft.com" />

    <!--测试支付-->
    <add key="testApply" value="true" />

    <add key="needVirRegInfo" value="true" />
    <add key="ShowGndbOnfree" value="false" />
    <add key="cfgfree" value="false" />

    <add key="wx_service_url" value="http://oathen.lk361.com" />
    <add key="isTest" value="1" />

    <add key="default_menumode" value="0" />

    <!--offline为true则表示未正式上线，所有请求都返回统一页面-->
    <add key="offline" value="false" />
    <!--tester_ip 在offline的时候如果ip在tester_ip内的话则允许正常访问-->
    <add key="tester_ip" value="192.168.4.10" />

    <!--eqishow微信链接-->
    <add key="eqishow_url" value="http://192.168.4.10:86"></add>
    <add key="eqishow_userid" value="1" />
    <!--appserver-->
    <add key="appserver" value="http://192.168.4.10:91" />

    <!--代理商验证成功跳转地址-->
    <add key="agent_redirect_url" value="http://agent.laikensoft.com/promoter/index" />

    <!--微信文库cms分类配置-->
    <add key="wenku_cats" value="{&quot;cats&quot;:[          {&quot;title&quot;:&quot;SAAS行业&quot;,value:18},          {&quot;title&quot;:&quot;来肯产品&quot;,value:19},          {&quot;title&quot;:&quot;互联转型&quot;,value:20},          {&quot;title&quot;:&quot;用户答疑&quot;,value:21},          {&quot;title&quot;:&quot;来肯伙伴&quot;,value:22},          {&quot;title&quot;:&quot;管理咨询&quot;,value:23},          {&quot;title&quot;:&quot;其他&quot;,value:-1}          ]}" />

    <!--微信文库列表轮播新闻-->
    <add key="wenku_fixed_ids" value="1,2" />
    <!--微信支付配置-->
    <add key="oathenserver" value="cauth.lk361.com"/>

    <!--微信动态文库列表不显示这些id-->
    <add key="wenku_except_ids" value="" />
    <!--推广员提成设置：结束-->
    <!-- 微信推广员和代理商相关地址 -->
    <!--推广申请地址-->
    <add key="promoterapurl" value="http://wxwenku.lk361.com/v-U701P797N7?show_registe_promoter=1&amp;nolastpage=1" />
    <!--代理申请地址-->
    <add key="agentapurl" value="" />

    <!--是否不发送短信-->
    <add key="is_send_msg" value="true" />
    <!--异常发送邮件配置-->
    <add key="is_send_email" value="true" />
    <add key="email_list" value="348509214@qq.com,595064244@qq.com,weiqiong@lk361.cn" />
    <add key="smtp_cfg" value="{'host':'smtp.lk361.com','port':25,'account':'customer_service@lk361.cn','password':'41`VB*dDyzj!5G-BX~','displayname':'成都来肯信息技术有限公司'}" />
    <!--中奖短信-->
    <add key="lottery_message" value="尊敬的{0}，恭喜！您已在来肯3周年庆幸运转盘抽中{1}1份，稍后客服人员会与您取得联系！如有疑问可拨打统一服务热线4008007683。" />

    <!--batch_update_new_shardid;batch_update_new_domain-->
    <!--当遇到客户shardid与配置相等的时候，跳转到batch_update_newversion_erpdomain配置的ERP后台和batch_update_newversion_allinonedomain配置的crmoa-->
    <!--<add key="batch_update_newversion_shardid" value="3"/>
    <add key="batch_update_newversion_erpdomain" value="erpbeta.lk361.net"/>
    <add key="batch_update_newversion_allinonedomain" value="allinonebeta.lk361.net"/>-->
    <add key="分批升级新版本配置" value="[          { shardid:1, erpdomain:&quot;erp.laikensoft.com&quot;, allinonedomain:&quot;ent.laikensoft.com&quot; },          { shardid:2, erpdomain:&quot;erp.laikensoft.com&quot;, allinonedomain:&quot;ent.laikensoft.com&quot; },          { shardid:3, erpdomain:&quot;erpbeta.lk361.net&quot;,allinonedomain:&quot;allinonebeta.lk361.net&quot;,appserverdomain:&quot;appbeta.lk361.net&quot; },          { shardid:4, erpdomain:&quot;ent.laikensoft.com&quot;,appserverdomain:&quot;localhost:92&quot; }]" />

    <add key="erp_use_ssl" value="false" />
  </appSettings>
  <connectionStrings>
    <add name="ccglobal" connectionString="server=192.168.4.8;database=cc_global;uid=root;pwd=1" />
    <add name="erp" connectionString="server=192.168.4.8;database=erp;uid=root;pwd=1" />
    <add name="lknews" connectionString="server=192.168.4.8;database=lk;uid=root;pwd=1" />
    <add name="eqishow" connectionString="server=192.168.4.8;database=eqishow;uid=root;pwd=1" />

  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpRuntime targetFramework="4.5" />
    <!--<customErrors mode="On" defaultRedirect="/error">
      <error statusCode="404" redirect="/error/error404" />
    </customErrors>-->
    <sessionState mode="Custom" customProvider="MySessionStateStore">
      <providers>
        <!-- For more details check https://github.com/Azure/aspnet-redis-providers/wiki -->
        <!-- Either use 'connectionString' OR 'settingsClassName' and 'settingsMethodName' OR use 'host','port','accessKey','ssl','connectionTimeoutInMilliseconds' and 'operationTimeoutInMilliseconds'. -->
        <!-- 'throwOnError','retryTimeoutInMilliseconds','databaseId' and 'applicationName' can be used with both options. -->
        <!--
          <add name="MySessionStateStore" 
            host = "127.0.0.1" [String]
            port = "" [number]
            accessKey = "" [String]
            ssl = "false" [true|false]
            throwOnError = "true" [true|false]
            retryTimeoutInMilliseconds = "5000" [number]
            databaseId = "0" [number]
            applicationName = "" [String]
            connectionTimeoutInMilliseconds = "5000" [number]
            operationTimeoutInMilliseconds = "1000" [number]
            connectionString = "<Valid StackExchange.Redis connection string>" [String]
            settingsClassName = "<Assembly qualified class name that contains settings method specified below. Which basically return 'connectionString' value>" [String]
            settingsMethodName = "<Settings method should be defined in settingsClass. It should be public, static, does not take any parameters and should have a return type of 'String', which is basically 'connectionString' value.>" [String]
            loggingClassName = "<Assembly qualified class name that contains logging method specified below>" [String]
            loggingMethodName = "<Logging method should be defined in loggingClass. It should be public, static, does not take any parameters and should have a return type of System.IO.TextWriter.>" [String]
            redisSerializerType = "<Assembly qualified class name that implements Microsoft.Web.Redis.ISerializer>" [String]
          />
        -->
        <clear/>
        <add name="MySessionStateStore" type="Microsoft.Web.Redis.RedisSessionStateProvider" host="192.168.4.8" accessKey="Lk361.com" ssl="false" />
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <staticContent>
    </staticContent>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration>